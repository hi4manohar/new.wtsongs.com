!function(t){"use strict";Date.now=Date.now||function(){return+new Date},t.ias=function(n){function e(){var n;return C.onChangePage(function(t,n,e){S&&S.setPage(t,e),w.onPageChange.call(this,t,e,n)}),i(),S&&S.havePage()&&(a(),n=S.getPage(),P.forceScrollTop(function(){var e;n>1?(u(n),e=s(!0),t("html, body").scrollTop(e)):i()})),y}function i(){r(),w.scrollContainer.scroll(o)}function o(){var t,n;t=P.getCurrentScrollOffset(w.scrollContainer),n=s(),t>=n&&(f()>=w.triggerPageTreshold?(a(),v(function(){c(t)})):c(t))}function a(){w.scrollContainer.unbind("scroll",o)}function r(){t(w.pagination).hide()}function s(n){var e,i;return e=t(w.container).find(w.item).last(),0===e.size()?0:(i=e.offset().top+e.height(),n||(i+=w.tresholdMargin),i)}function c(n,e){var o;return(o=t(w.next).attr("href"))?void(w.beforePageChange&&t.isFunction(w.beforePageChange)&&w.beforePageChange(n,o)===!1||(C.pushPages(n,o),a(),h(),l(o,function(n,s){var c,l=w.onLoadItems.call(this,s);l!==!1&&(t(s).hide(),c=t(w.container).find(w.item).last(),c.after(s),t(s).fadeIn()),o=t(w.next,n).attr("href"),t(w.pagination).replaceWith(t(w.pagination,n)),d(),r(),o?i():a(),w.onRenderComplete.call(this,s),e&&e.call(this)}))):(w.noneleft&&t(w.container).find(w.item).last().after(w.noneleft),a())}function l(n,e,i){var o,a,r,s=[],c=Date.now();i=i||w.loaderDelay,t.get(n,null,function(n){o=t(w.container,n).eq(0),0===o.length&&(o=t(n).filter(w.container).eq(0)),o&&o.find(w.item).each(function(){s.push(this)}),e&&(r=this,a=Date.now()-c,i>a?setTimeout(function(){e.call(r,n,s)},i-a):e.call(r,n,s))},"html")}function u(n){var e=s(!0);e>0&&c(e,function(){a(),C.getCurPageNum(e)+1<n?(u(n),t("html,body").animate({scrollTop:e},400,"swing")):(t("html,body").animate({scrollTop:e},1e3,"swing"),i())})}function f(){var t=P.getCurrentScrollOffset(w.scrollContainer);return C.getCurPageNum(t)}function g(){var n=t(".ias_loader");return 0===n.size()&&(n=t('<div class="ias_loader">'+w.loader+"</div>"),n.hide()),n}function h(){var n,e=g();w.customLoaderProc!==!1?w.customLoaderProc(e):(n=t(w.container).find(w.item).last(),n.after(e),e.fadeIn())}function d(){var t=g();t.remove()}function p(n){var e=t(".ias_trigger");return 0===e.size()&&(e=t('<div class="ias_trigger"><a href="#">'+w.trigger+"</a></div>"),e.hide()),t("a",e).off("click").on("click",function(){return m(),n.call(),!1}),e}function v(n){var e,i=p(n);e=t(".pagination_container_inner"),e.append(i),i.fadeIn()}function m(){var t=p();t.remove()}var w=t.extend({},t.ias.defaults,n),P=new t.ias.util,C=new t.ias.paging(w.scrollContainer),S=w.history?new t.ias.history:!1,y=this;e()},t.ias.defaults={container:"#container",scrollContainer:t(window),item:".item",pagination:"#pagination",next:".next",noneleft:!1,loader:'<img src="images/loader.gif"/>',loaderDelay:600,triggerPageTreshold:3,trigger:"Load more items",tresholdMargin:0,history:!0,onPageChange:function(){},beforePageChange:function(){},onLoadItems:function(){},onRenderComplete:function(){},customLoaderProc:!1},t.ias.util=function(){function n(){t(window).load(function(){e=!0})}var e=!1,i=!1,o=this;n(),this.forceScrollTop=function(n){t("html,body").scrollTop(0),i||(e?(n.call(),i=!0):setTimeout(function(){o.forceScrollTop(n)},1))},this.getCurrentScrollOffset=function(t){var n,e;return n=t.get(0)===window?t.scrollTop():t.offset().top,e=t.height(),n+e}},t.ias.paging=function(){function n(){t(window).scroll(e)}function e(){var n,e,a,l,u;n=c.getCurrentScrollOffset(t(window)),e=i(n),a=o(n),s!==e&&(l=a[0],u=a[1],r.call({},e,l,u)),s=e}function i(t){for(var n=a.length-1;n>0;n--)if(t>a[n][0])return n+1;return 1}function o(t){for(var n=a.length-1;n>=0;n--)if(t>a[n][0])return a[n];return null}var a=[[0,document.location.toString()]],r=function(){},s=1,c=new t.ias.util;n(),this.getCurPageNum=function(n){return n=n||c.getCurrentScrollOffset(t(window)),i(n)},this.onChangePage=function(t){r=t},this.pushPages=function(t,n){a.push([t,n])}},t.ias.history=function(){function t(){e=!!(window.history&&history.pushState&&history.replaceState),e=!1}var n=!1,e=!1;t(),this.setPage=function(t,n){this.updateState({page:t},"",n)},this.havePage=function(){return this.getState()!==!1},this.getPage=function(){var t;return this.havePage()?(t=this.getState(),t.page):1},this.getState=function(){var t,n,i;if(e){if(n=history.state,n&&n.ias)return n.ias}else if(t="#/page/"===window.location.hash.substring(0,7))return i=parseInt(window.location.hash.replace("#/page/",""),10),{page:i};return!1},this.updateState=function(t,e,i){n?this.replaceState(t,e,i):this.pushState(t,e,i)},this.pushState=function(t,i,o){var a;e?history.pushState({ias:t},i,o):(a=t.page>0?"#/page/"+t.page:"",window.location.hash=a),n=!0},this.replaceState=function(t,n,i){e?history.replaceState({ias:t},n,i):this.pushState(t,n,i)}}}(jQuery);